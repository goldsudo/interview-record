redis中有多少种数据结构？
redis是单线程的吗？
为什么redis很快？
redis的RDB与AOF两种持久化机制的区别？
如何利用redis实现分布式锁？
如何利用redis实现客户端恶意脚本批量请求的防攻击检测？
如何利用一致性hash实现redis集群？
如何用redis实现消息队列？
redis缓存击穿怎么办？
redis与memcached的区别？
redis从哪个版本开始支持集群？
redis集群怎么部署？

redis中有多少种数据结构？
答：
	主要是五种：string、hash、list、set、sortedlist
	其实Pub/Sub应该也算一种，不过目前还没有使用过，不是很清楚

redis是单线程的吗？
答：
	是的，redis使用c语言实现，是单线程的。
	注意：单线程只是在描述redis处理网络请求时只用一个线程，而redis运行期间并不是只有一个线程的，比如在执行持久化的时候redis就会以子进程或者子线程的方式执行。

为什么redis很快？
答:
	Redis采用的是基于内存的采用的是单进程单线程模型的 KV 数据库，由C语言编写，官方提供的数据是可以达到100000+的QPS（每秒内查询次数）。
	这个数据不比采用单进程多线程的同样基于内存的 KV 数据库 Memcached 差。
	具体原因：
		1、完全基于内存，绝大部分请求是纯粹的内存操作，非常快速。数据存在内存中，类似于HashMap，HashMap的优势就是查找和操作的时间复杂度都是O(1)；
		2、数据结构简单，对数据操作也简单，Redis中的数据结构是专门进行设计的；
		3、采用单线程，避免了不必要的上下文切换和竞争条件，也不存在多进程或者多线程导致的切换而消耗 CPU，不用去考虑各种锁的问题，不存在加锁释放锁操作，没有因为可能出现死锁而导致的性能消耗；
		4、使用多路I/O复用模型，非阻塞IO,采用多路 I/O复用技术可以让单个线程高效的处理多个连接请求（尽量减少网络 IO 的时间消耗），且Redis在内存中操作数据的速度非常快，也就是说内存内的操作不会成为影响Redis性能的瓶颈；
		5、使用底层模型不同，它们之间底层实现方式以及与客户端之间通信的应用协议不一样，Redis直接自己构建了VM 机制 ，因为一般的系统调用系统函数的话，会浪费一定的时间去移动和请求；
	因为Redis是基于内存的操作，CPU不是Redis的瓶颈，Redis的瓶颈最有可能是机器内存的大小或者网络带宽。既然单线程容易实现，而且CPU不会成为瓶颈，那就顺理成章地采用单线程的方案了。
	但是使用单线程的方式是无法发挥多核CPU性能，不过可以通过在单机开多个Redis实例来完善。

redis的RDB与AOF两种持久化机制的区别？
答：
	RDB保存数据快照，是完整的数据，但是io操作较大，比较影响性能，数据量大时可能会造成reids服务暂时停止。
	AOF是不断的记录所有客户端的操作，当重启redis时，还原这些操作已达到还原数据的效果。
	RDB的保存频率较低，而且是触发式的，比如300s内发生10次以上的key被修改，则进行保存，这导致redis挂掉后容易丢失好几分钟内的数据，但是RDB在恢复大数据集时的速度很快。
	AOF的保存频率较高，默认是每秒记录一次，这使得redis挂掉也只会丢失1s的数据。但是AOF文件往往大于RDB的体积，因为AOF不仅保存数据还保存操作。redis会在AOF文件体积过大时自动在后台进行AOF的重写，将一些可以合并的操作进行压缩。

如何利用redis实现分布式锁？
答：
	setnx操作加一个expire失效时间

如何利用redis实现客户端恶意脚本批量请求的防攻击检测？
答：
	利用incr记录一个计数器，key是用户id，value是用户访问次数初始为0，key的失效时间为1s，用户的每次访问都使该计数器值加1，当发现1s内计数器值超过一定的阈值比如10次，那么就执行logout操作，将用户重定向到登录页面。

如何利用一致性hash实现redis集群？
答：
	redis3.0是支持Cluster主从模式的，不过利用一致性hash连接多个redis实例也可以实现。
	比如创建3个redis实例，每个实例中都保存完整的数据。
	用户发来请求时，通过一致性hash将用户定位到某个redis上去请求数据，这样就能利用多个redis来提速了，否则即使redis很快，但当请求数多的时候仍然需要一定的排队时间。
	如果某个redis节点坏掉了，一致性hash算法可以保证将用户定位下一个正常的redis上去。

如何用redis实现消息队列？
答：
	使用list的相关指令实现，比如lpush将消息存入队列，rpop将消息取出，或者brpop阻塞等待直到由消息可以取出。

redis缓存击穿怎么办？
答：
	要在代码里保证缓存读取失败后，进行数据库查询，避免缓存挂掉就直接使得业务挂掉。
	只是这种情况将可能会遇到数据库的性能瓶颈。

redis与memcached的区别？
答：
	redis支持的数据结构和操作比memcached丰富
	memcached只支持键值对
	redis是单线程处理请求
	memcached可以使用多核，因此在存储小数据上时redis快，但是存储100k以上的大数据时memcached性能高。
	
redis从哪个版本开始支持集群？
答：
    3.0版本推出了redis的cluster功能

redis集群怎么部署？
答：
    可以使用redis3.0以上版本提供的cluster模式
    也可以自行部署多个redis实例，然后通过一致性hash进行负载均衡